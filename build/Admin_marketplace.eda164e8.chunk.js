(self.webpackChunkdb_busmerah=self.webpackChunkdb_busmerah||[]).push([[5516],{60596:function(A,S,n){(function(e,h){A.exports=h(n(67294))})(this,function(e){return function(h){var y={};function c(a){if(y[a])return y[a].exports;var s=y[a]={i:a,l:!1,exports:{}};return h[a].call(s.exports,s,s.exports,c),s.l=!0,s.exports}return c.m=h,c.c=y,c.d=function(a,s,f){c.o(a,s)||Object.defineProperty(a,s,{enumerable:!0,get:f})},c.r=function(a){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},c.t=function(a,s){if(1&s&&(a=c(a)),8&s||4&s&&typeof a=="object"&&a&&a.__esModule)return a;var f=Object.create(null);if(c.r(f),Object.defineProperty(f,"default",{enumerable:!0,value:a}),2&s&&typeof a!="string")for(var E in a)c.d(f,E,function(d){return a[d]}.bind(null,E));return f},c.n=function(a){var s=a&&a.__esModule?function(){return a.default}:function(){return a};return c.d(s,"a",s),s},c.o=function(a,s){return Object.prototype.hasOwnProperty.call(a,s)},c.p="",c(c.s=86)}({0:function(h,y){h.exports=e},86:function(h,y,c){"use strict";c.r(y);var a=c(0);function s(){return(s=Object.assign||function(f){for(var E=1;E<arguments.length;E++){var d=arguments[E];for(var T in d)Object.prototype.hasOwnProperty.call(d,T)&&(f[T]=d[T])}return f}).apply(this,arguments)}y.default=function(f){return a.createElement("svg",s({width:"1em",height:"1em",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},f),a.createElement("path",{d:"M0 4a4 4 0 014-4h24a4 4 0 014 4v24a4 4 0 01-4 4H4a4 4 0 01-4-4V4z",fill:"#AC73E6"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.027 13.839c-3.19-.836-6.305-1.064-10.18-.608-1.215.152-1.063 1.975.076 2.203.304.836.456 2.355.912 3.267.987 2.279 5.622 1.975 7.369.835 1.14-.683 1.443-2.279 1.9-3.494.227-.684 1.595-.684 1.822 0 .38 1.215.76 2.81 1.9 3.494 1.747 1.14 6.381 1.444 7.369-.835.456-.912.607-2.431.911-3.267 1.14-.228 1.216-2.051.076-2.203-3.874-.456-6.989-.228-10.18.608-.455.075-1.519.075-1.975 0z",fill:"#fff"}))}}})})},44021:(A,S,n)=>{"use strict";n.r(S),n.d(S,{MarketPlacePage:()=>X,default:()=>Ve});var e=n(67294),h=n(97132),y=n(15482),c=n(63852),a=n(68547),s=n(78862),f=n(62031),E=n(21263),d=n(5493),T=n(84686),k=n(49425),b=n(67826),M=n(11402),re=n(45697),o=n.n(re),x=n(15804),le=n(85407),se=n.n(le),D=n(78384);const oe=(0,D.default)(d.Box)`
  background: ${({theme:t})=>`linear-gradient(180deg, rgba(234, 234, 239, 0) 0%, ${t.colors.neutral150} 100%)`};
  opacity: 0.33;
`,ie=()=>e.createElement(s.GridLayout,null,Array(12).fill(null).map((t,r)=>e.createElement(oe,{key:`empty-plugin-card-${r}`,height:"234px",hasRadius:!0}))),F=({content:t})=>e.createElement(d.Box,{position:"relative"},e.createElement(ie,null),e.createElement(d.Box,{position:"absolute",top:11,width:"100%"},e.createElement(b.Flex,{alignItems:"center",justifyContent:"center",direction:"column"},e.createElement(x.Icon,{as:se(),color:"",width:"160px",height:"88px"}),e.createElement(d.Box,{paddingTop:6},e.createElement(k.Typography,{variant:"delta",as:"p",textColor:"neutral600"},t)))));F.propTypes={content:o().string.isRequired};const $=F;var G=n(13260),ce=n(82036),de=n.n(ce);const R=({isOnline:t,npmPackageType:r})=>{const{formatMessage:l}=(0,h.useIntl)(),{trackUsage:m}=(0,a.useTracking)(),u=r==="provider"?"didSubmitProvider":"didSubmitPlugin";return e.createElement(s.HeaderLayout,{title:l({id:"global.marketplace",defaultMessage:"Marketplace"}),subtitle:l({id:"admin.pages.MarketPlacePage.subtitle",defaultMessage:"Get more out of Strapi"}),primaryAction:t&&e.createElement(G.LinkButton,{startIcon:e.createElement(de(),null),variant:"tertiary",href:`https://market.strapi.io/submit-${r}`,onClick:()=>m(u),isExternal:!0},l({id:`admin.pages.MarketPlacePage.submit.${r}.link`,defaultMessage:`Submit ${r}`}))})},U=R;R.defaultProps={npmPackageType:"plugin"},R.propTypes={isOnline:o().bool.isRequired,npmPackageType:o().string};var H=n(23724),ue=n(9669),w=n.n(ue),pe=(t,r,l)=>new Promise((m,u)=>{var i=p=>{try{P(l.next(p))}catch(v){u(v)}},g=p=>{try{P(l.throw(p))}catch(v){u(v)}},P=p=>p.done?m(p.value):Promise.resolve(p.value).then(i,g);P((l=l.apply(t,r)).next())});const ge="https://market-api.strapi.io",me=()=>pe(void 0,null,function*(){const{data:t}=yield w().get(`${ge}/providers`);return t}),fe=t=>{const r=(0,a.useNotification)();return(0,H.useQuery)("list-marketplace-providers",()=>me(),{onSuccess(){t&&t()},onError(){r({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}})}})};var ve=Object.defineProperty,he=Object.defineProperties,Pe=Object.getOwnPropertyDescriptors,z=Object.getOwnPropertySymbols,ye=Object.prototype.hasOwnProperty,Ee=Object.prototype.propertyIsEnumerable,W=(t,r,l)=>r in t?ve(t,r,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[r]=l,Me=(t,r)=>{for(var l in r||(r={}))ye.call(r,l)&&W(t,l,r[l]);if(z)for(var l of z(r))Ee.call(r,l)&&W(t,l,r[l]);return t},ke=(t,r)=>he(t,Pe(r)),be=(t,r,l)=>new Promise((m,u)=>{var i=p=>{try{P(l.next(p))}catch(v){u(v)}},g=p=>{try{P(l.throw(p))}catch(v){u(v)}},P=p=>p.done?m(p.value):Promise.resolve(p.value).then(i,g);P((l=l.apply(t,r)).next())});const Te="https://market-api.strapi.io",xe=()=>be(void 0,null,function*(){const{data:t}=yield w().get(`${Te}/plugins`);return ke(Me({},t),{data:t.data.filter(l=>l.attributes.strapiCompatibility==="v4")})}),Se=t=>{const r=(0,a.useNotification)();return(0,H.useQuery)("list-marketplace-plugins",()=>xe(),{onSuccess(){t&&t()},onError(){r({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}})}})};var Re=n(87751);const Ce=n.p+"a6b842e0b6d2b61135d1.svg",Ie=()=>{const t=typeof navigator!="undefined"&&typeof navigator.onLine=="boolean"?navigator.onLine:!0,[r,l]=(0,e.useState)(t),m=()=>l(!0),u=()=>l(!1);return(0,e.useEffect)(()=>(window.addEventListener("online",m),window.addEventListener("offline",u),()=>{window.removeEventListener("online",m),window.removeEventListener("offline",u)}),[]),r};var Be=n(60596),Oe=n.n(Be),Le=n(43257),Y=n.n(Le);const Ne=()=>{const{formatMessage:t}=(0,h.useIntl)(),{trackUsage:r}=(0,a.useTracking)();return e.createElement("a",{href:"https://strapi.canny.io/plugin-requests",target:"_blank",rel:"noopener noreferrer nofollow",style:{textDecoration:"none"},onClick:()=>r("didMissMarketplacePlugin")},e.createElement(a.ContentBox,{title:t({id:"admin.pages.MarketPlacePage.missingPlugin.title",defaultMessage:"Documentation"}),subtitle:t({id:"admin.pages.MarketPlacePage.missingPlugin.description",defaultMessage:"Tell us what plugin you are looking for and we'll let our community plugin developers know in case they are in search for inspiration!"}),icon:e.createElement(Oe(),null),iconBackground:"alternative100",endAction:e.createElement(x.Icon,{as:Y(),color:"neutral600",width:3,height:3,marginLeft:2})}))};var Q=n(34626),je=n(23450),Ae=n.n(je),De=n(9008),Z=n(93355),Fe=n(23942),$e=n.n(Fe);const Ge=n.p+"90f49a385afb000fb1d4.svg";var Ue=n(74855),He=n(84734),we=n.n(He),ze=n(67483),We=n.n(ze),Ye=n(19408);const K=({isInstalled:t,isInDevelopmentMode:r,commandToCopy:l})=>{const m=(0,a.useNotification)(),{formatMessage:u}=(0,h.useIntl)(),{trackUsage:i}=(0,a.useTracking)();return t?e.createElement(d.Box,{paddingLeft:4},e.createElement(x.Icon,{as:we(),marginRight:2,width:12,height:12,color:"success600"}),e.createElement(k.Typography,{variant:"omega",textColor:"success600",fontWeight:"bold"},u({id:"admin.pages.MarketPlacePage.plugin.installed",defaultMessage:"Installed"}))):r?e.createElement(Ue.CopyToClipboard,{onCopy:()=>{i("willInstallPlugin"),m({type:"success",message:{id:"admin.pages.MarketPlacePage.plugin.copy.success"}})},text:l},e.createElement(Ye.Button,{size:"S",startIcon:e.createElement(We(),null),variant:"secondary"},u({id:"admin.pages.MarketPlacePage.plugin.copy",defaultMessage:"Copy install command"}))):null};K.propTypes={isInstalled:o().bool.isRequired,isInDevelopmentMode:o().bool.isRequired,commandToCopy:o().string.isRequired};const Qe=K,Ze=(0,D.default)(k.Typography)`
  /* stylelint-disable value-no-vendor-prefix, property-no-vendor-prefix */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 2;
  /* stylelint-enable value-no-vendor-prefix, property-no-vendor-prefix */
  overflow: hidden;
`,C=({npmPackage:t,isInstalled:r,useYarn:l,isInDevelopmentMode:m,npmPackageType:u})=>{const{attributes:i}=t,{formatMessage:g}=(0,h.useIntl)(),{trackUsage:P}=(0,a.useTracking)(),p=l?`yarn add ${i.npmPackageName}`:`npm install ${i.npmPackageName}`,v=g({id:"admin.pages.MarketPlacePage.plugin.tooltip.madeByStrapi",defaultMessage:"Made by Strapi"}),B=`https://market.strapi.io/${Ae().plural(u)}/${i.slug}`;return e.createElement(b.Flex,{direction:"column",justifyContent:"space-between",paddingTop:4,paddingRight:4,paddingBottom:4,paddingLeft:4,hasRadius:!0,background:"neutral0",shadow:"tableShadow",height:"100%",alignItems:"normal","data-testid":"npm-package-card"},e.createElement(d.Box,null,e.createElement(d.Box,{as:"img",src:i.logo.url,alt:`${i.name} logo`,hasRadius:!0,width:11,height:11}),e.createElement(d.Box,{paddingTop:4},e.createElement(k.Typography,{as:"h3",variant:"delta"},e.createElement(b.Flex,{alignItems:"center"},i.name,i.validated&&!i.madeByStrapi&&e.createElement(Z.Tooltip,{description:g({id:"admin.pages.MarketPlacePage.plugin.tooltip.verified",defaultMessage:"Plugin verified by Strapi"})},e.createElement(b.Flex,null,e.createElement(x.Icon,{as:$e(),marginLeft:2,color:"success600"}))),i.madeByStrapi&&e.createElement(Z.Tooltip,{description:v},e.createElement(b.Flex,null,e.createElement(d.Box,{as:"img",src:Ge,alt:v,marginLeft:1,width:6,height:"auto"})))))),e.createElement(d.Box,{paddingTop:2},e.createElement(Ze,{as:"p",variant:"omega",textColor:"neutral600"},i.description))),e.createElement(De.Stack,{horizontal:!0,spacing:2,style:{alignSelf:"flex-end"},paddingTop:6},e.createElement(G.LinkButton,{size:"S",href:B,isExternal:!0,endIcon:e.createElement(Y(),null),"aria-label":g({id:"admin.pages.MarketPlacePage.plugin.info.label",defaultMessage:"Learn more about {pluginName}"},{pluginName:i.name}),variant:"tertiary",onClick:()=>P("didPluginLearnMore")},g({id:"admin.pages.MarketPlacePage.plugin.info.text",defaultMessage:"Learn more"})),e.createElement(Qe,{isInstalled:r,isInDevelopmentMode:m,commandToCopy:p})))};C.defaultProps={isInDevelopmentMode:!1},C.propTypes={npmPackage:o().shape({id:o().string.isRequired,attributes:o().shape({name:o().string.isRequired,description:o().string.isRequired,slug:o().string.isRequired,npmPackageName:o().string.isRequired,npmPackageUrl:o().string.isRequired,repositoryUrl:o().string.isRequired,logo:o().object.isRequired,developerName:o().string.isRequired,validated:o().bool.isRequired,madeByStrapi:o().bool.isRequired,strapiCompatibility:o().oneOf(["v3","v4"])}).isRequired}).isRequired,isInstalled:o().bool.isRequired,useYarn:o().bool.isRequired,isInDevelopmentMode:o().bool,npmPackageType:o().string.isRequired};const Ke=C,I=({npmPackages:t,installedPackageNames:r,useYarn:l,isInDevelopmentMode:m,npmPackageType:u})=>{const i=(0,e.useCallback)(g=>r.includes(g),[r]);return e.createElement(Q.Grid,{gap:4},t.map(g=>e.createElement(Q.GridItem,{col:4,s:6,xs:12,style:{height:"100%"},key:g.id},e.createElement(Ke,{npmPackage:g,isInstalled:i(g.attributes.npmPackageName),useYarn:l,isInDevelopmentMode:m,npmPackageType:u}))))};I.defaultProps={installedPackageNames:[]},I.propTypes={npmPackages:o().array.isRequired,installedPackageNames:o().arrayOf(o().string),useYarn:o().bool.isRequired,isInDevelopmentMode:o().bool.isRequired,npmPackageType:o().string.isRequired};const V=I,J=(t,r)=>(0,c.ZP)(t,r,{keys:[{threshold:c.ZP.rankings.WORD_STARTS_WITH,key:"attributes.name"},{threshold:c.ZP.rankings.WORD_STARTS_WITH,key:"attributes.description"}]}),X=()=>{const{formatMessage:t}=(0,h.useIntl)(),{trackUsage:r}=(0,a.useTracking)(),{notifyStatus:l}=(0,T.useNotifyAT)(),m=(0,e.useRef)(r),u=(0,a.useNotification)(),[i,g]=(0,e.useState)(""),[P,p]=(0,e.useState)("plugin"),{autoReload:v,dependencies:B,useYarn:q}=(0,a.useAppInfos)(),O=Ie();(0,a.useFocusWhenNavigate)();const Je=t({id:"global.marketplace",defaultMessage:"Marketplace"}),_=()=>{l(t({id:"app.utils.notify.data-loaded",defaultMessage:"The {target} has loaded"},{target:Je}))},{status:ee,data:Xe}=Se(_),{status:te,data:qe}=fe(_),_e=[ee,te].includes("loading"),et=[ee,te].includes("error");if((0,e.useEffect)(()=>{m.current("didGoToMarketplace")},[]),(0,e.useEffect)(()=>{v||u({type:"info",message:{id:"admin.pages.MarketPlacePage.production",defaultMessage:"Manage plugins from the development environment"},blockTransition:!0})},[u,v]),!O)return e.createElement(s.Layout,null,e.createElement(f.Main,null,e.createElement(U,{isOnline:O}),e.createElement(b.Flex,{width:"100%",direction:"column",alignItems:"center",justifyContent:"center",style:{paddingTop:"120px"}},e.createElement(d.Box,{paddingBottom:2},e.createElement(k.Typography,{textColor:"neutral700",variant:"alpha"},t({id:"admin.pages.MarketPlacePage.offline.title",defaultMessage:"You are offline"}))),e.createElement(d.Box,{paddingBottom:6},e.createElement(k.Typography,{textColor:"neutral700",variant:"epsilon"},t({id:"admin.pages.MarketPlacePage.offline.subtitle",defaultMessage:"You need to be connected to the Internet to access Strapi Market."}))),e.createElement("img",{src:Ce,alt:"offline",style:{width:"88px",height:"88px"}}))));if(et)return e.createElement(s.Layout,null,e.createElement(s.ContentLayout,null,e.createElement(d.Box,{paddingTop:8},e.createElement(a.AnErrorOccurred,null))));if(_e)return e.createElement(s.Layout,null,e.createElement(f.Main,{"aria-busy":!0},e.createElement(a.LoadingIndicatorPage,null)));const L=J(Xe.data,i),N=J(qe.data,i),ae=t({id:"admin.pages.MarketPlacePage.search.empty",defaultMessage:'No result for "{target}"'},{target:i}),tt=j=>{p(j===0?"plugin":"provider")},ne=Object.keys(B);return e.createElement(s.Layout,null,e.createElement(f.Main,null,e.createElement(y.Helmet,{title:t({id:"admin.pages.MarketPlacePage.helmet",defaultMessage:"Marketplace - Plugins"})}),e.createElement(U,{isOnline:O,npmPackageType:P}),e.createElement(s.ContentLayout,null,e.createElement(d.Box,{width:"25%",paddingBottom:4},e.createElement(E.Searchbar,{name:"searchbar",onClear:()=>g(""),value:i,onChange:j=>g(j.target.value),clearLabel:t({id:"admin.pages.MarketPlacePage.search.clear",defaultMessage:"Clear the search"}),placeholder:t({id:"admin.pages.MarketPlacePage.search.placeholder",defaultMessage:"Search"})},t({id:"admin.pages.MarketPlacePage.search.placeholder",defaultMessage:"Search"}))),e.createElement(M.TabGroup,{label:t({id:"admin.pages.MarketPlacePage.tab-group.label",defaultMessage:"Plugins and Providers for Strapi"}),id:"tabs",variant:"simple",onTabChange:tt},e.createElement(d.Box,{paddingBottom:4},e.createElement(M.Tabs,null,e.createElement(M.Tab,null,t({id:"admin.pages.MarketPlacePage.plugins",defaultMessage:"Plugins"})," ","(",L.length,")"),e.createElement(M.Tab,null,t({id:"admin.pages.MarketPlacePage.providers",defaultMessage:"Providers"})," ","(",N.length,")"))),e.createElement(M.TabPanels,null,e.createElement(M.TabPanel,null,i.length>0&&!L.length?e.createElement($,{content:ae}):e.createElement(V,{npmPackages:L,installedPackageNames:ne,useYarn:q,isInDevelopmentMode:v,npmPackageType:"plugin"})),e.createElement(M.TabPanel,null,i.length>0&&!N.length?e.createElement($,{content:ae}):e.createElement(V,{npmPackages:N,installedPackageNames:ne,useYarn:q,isInDevelopmentMode:v,npmPackageType:"provider"})))),e.createElement(d.Box,{paddingTop:7},e.createElement(Ne,null)))))},Ve=()=>e.createElement(a.CheckPagePermissions,{permissions:Re.Z.marketplace.main},e.createElement(X,null))}}]);
